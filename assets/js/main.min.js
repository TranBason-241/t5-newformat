$(document).ready(function () {
  var main = new Swiper(".main-swiper", {
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },
    slidesPerView: 6,
    spaceBetween: 12,
    grabCursor: false,
    allowTouchMove: false,
    // direction: "vertical",
    breakpoints: {
      1024: {
        slidesPerView: 5,
        spaceBetween: 20,
      },
      1280: {
        slidesPerView: 7,
        spaceBetween: 20,
      },
      1281: {
        slidesPerView: 6,
        spaceBetween: 20,
      },
      1925: {
        slidesPerView: 6,
        spaceBetween: 20,
      },
    },
  });

  for (var i = 0; i < 6; i++) {
    name = `.inside-swiper-${i + 1}`;
    console.log(name);
    var slide = new Swiper(name, {
      // direction: "vertical",
      // spaceBetween: 50,
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
      slidesPerView: 1,
      autoplay: {
        delay: 1000, // Thời gian hiển thị của mỗi slide
        disableOnInteraction: true, // Cho phép auto scroll khi interation
      },
      loop: true,
    });
    slide.autoplay.stop();
  }

  main_slider_item = document.querySelectorAll(".swiper-v");
  main_slider_item.forEach((element) => {
    element.onmouseover = (event) => {
      element.swiper.autoplay.start();
    };
    element.onmouseout = function () {
      element.swiper.autoplay.stop();
    };
    element.onclick = () => {
      showPopupSlide(element.getAttribute("key"));
    };
  });

  // for (var i = 0; i < 2; i++) {
  //   name = `.outside-swiper-${i + 1}`;
  //   console.log(name);
  //   var slide = new Swiper(name, {
  //     // direction: "vertical",
  //     // spaceBetween: 50,
  //     pagination: {
  //       el: ".swiper-pagination",
  //       clickable: true,
  //     },
  //     slidesPerView: 1,
  //     loop: true,
  //   });
  // }

  showPopupSlide = (key) => {
    document.querySelector(".my_popup").classList.remove("d-none");

    listSlider = document.querySelectorAll("#tranding");
    const filteredElements = Array.from(listSlider).filter((slider) => !slider.classList.contains("d-none"));
    if (filteredElements.length > 0) {
      filteredElements[0].classList.add("d-none");
    }
    console.log(`slider-${key}`);
    if (document.querySelector(`.slider-${key}`)) {
      document.querySelector(`.slider-${key}`).classList.remove("d-none");
    }
  };

  closePopup = () => {
    document.querySelector(".my_popup").classList.add("d-none");
  };

  //btn-close
  btnCloses = document.querySelectorAll(".icon-container-close");
  btnCloses.forEach((element) => {
    element.onclick = () => {
      closePopup();
    };
  });
  //  click outside slide to close

  document.querySelector(".my_popup").addEventListener("click", (e) => {
    console.log(e.target);
    if (e.target.id == "tranding") {
      closePopup();
    }
  });

  document.onkeydown = function (evt) {
    evt = evt || window.event;
    var isEscape = false;
    if ("key" in evt) {
      isEscape = evt.key === "Escape" || evt.key === "Esc";
    } else {
      isEscape = evt.keyCode === 27;
    }
    if (isEscape) {
      closePopup();
    }
  };

  setTimeout(() => {
    var TrandingSlider = new Swiper(".tranding-slider", {
      effect: "coverflow",
      grabCursor: true,
      centeredSlides: true,
      loop: true,
      slidesPerView: "auto",
      slidesToShow: 3,
      // slidesPerView: default,
      coverflowEffect: {
        rotate: 0,
        stretch: 260,
        depth: 400,
        modifier: 1,
      },
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
        type: "fraction",
      },
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
      breakpoints: {
        415: {
          pagination: {
            el: ".swiper-pagination",
            clickable: true,
            type: "progressbar",
          },
          coverflowEffect: {
            rotate: 0,
            stretch: 260,
            depth: 400,
            modifier: 1,
          },
        },
        300: {
          pagination: {
            el: ".swiper-pagination",
            clickable: true,
            type: "progressbar",
          },
          coverflowEffect: {
            rotate: 0,
            stretch: 0,
            depth: 0,
            modifier: 0,
          },
        },
      },
    });
  }, 500);
});

// write function convert string to number

// write function change background when click on button has id = "haha"
